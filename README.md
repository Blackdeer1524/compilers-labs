# Лабораторная работа 3.2 «Форматтер исходных текстов»

## 1 Цель работы

Целью данной работы является приобретение навыков использования генератора синтаксических анализаторов bison.
## 2 Исходные данные

Форматтер исходных текстов — это инструментальное средство, выполняющее вставку пробельных символов в исходные тескты программ, записанных на некотором языке, для улучшения удобочитаемости этих исходных текстов.

Форматтеры бывают сильными и слабыми. Слабый форматтер, в отличие от сильного, не может вставлять в исходный текст программы переводы строки.

Также сильный форматтер должен удалять комментарии из исходного текста, слабый, наоборот, комментарии должен сохранять (но сильный форматтер, сохраняющий комментарии, ошибкой не является).

Например, рассмотрим неотформатированную программу на языке Pascal:

```pascal
var i:integer;
a,b,c:string
begin
a:='a';b:='b';
for i:=1 to 10 do begin
Println(a);
c:=a;a:=b;b:=c+b
end
end.
```

Слабый форматтер расставит в программе отступы и пробелы между лексемами:

```pascal
var i: integer;
  a, b, c: string
begin
  a := 'a'; b := 'b';
  for i := 1 to 10 do begin
    Println(a);
    c := a; a := b; b := c+b
  end
end.
```

Сильный форматтер добавит переводы строки после ключевых слов var и begin и, кроме того, разобьёт строки, содержащие сразу несколько операторов:

```pascal
var
  i: integer;
  a, b, c: string
begin
  a := 'a';
  b := 'b';
  for i := 1 to 10 do
  begin
    Println(a);
    c := a;
    a := b;
    b := c+b
  end
end.
```

## 3 Задание

В данной лабораторной работе требуется разработать сильный форматтер исходных текстов, указанный в индивидуальном варианте.

Выполнение лабораторной работы состоит из следующих этапов:

    Создание реентрантного лексического анализатора с помощью flex.
    Разработка реентрантного синтаксического анализатора с помощью bison и соединение его с лексическим анализатором.
    Вставка в синтаксический анализатор семантических действий, выполняющих порождение отформатированного исходного текста программы.
    Тестирование работоспособности получившегося форматтера на наборе примеров.

Форматтер должен работать до обнаружения первой синтаксической ошибки в тексте программы.

Форматирование должно осуществляться в соответствии с традициями соответствующего языка программирования. Если таких традиций несколько (как, например, для языков с Си-подобным синтаксисом), то можно выбрать любую.

### 3.1 Индивидуальный вариант

Язык [L4](https://hw.iu9.bmstu.ru/static/assets/L4.pdf).

Вложенные комментарии реализовывать не нужно.

Уточнение:
* идентификаторы переменных начинаются на _, !, @, ., #,
* идентификаторы функций начинаются на букву.
